# Sparkle Player - 需求文档

## 项目概述

Sparkle Player 是一个现代化的音乐播放器应用程序，基于 Avalonia UI 框架开发的 C# 桌面应用。项目从 Java AWT 版本重新设计，旨在提供流畅、美观、功能丰富的音乐播放体验。

### 版本信息
- **当前版本**: 1.0.0
- **目标平台**: Windows, macOS, Linux
- **开发框架**: Avalonia UI (.NET 9.0)
- **架构模式**: MVVM

## 设计理念

### 视觉设计
- **现代化界面**: 采用扁平化设计风格，简洁清晰
- **毛玻璃效果**: 利用 Avalonia 的 AcrylicBlur 透明度效果
- **响应式布局**: 支持不同屏幕尺寸的自适应显示
- **优雅的动画**: 平滑的过渡效果和交互反馈

### 主题系统
基于现有的深色/浅色主题配色方案：

#### 深色主题 (Dark Theme)
- **主背景**: `#FF181A1B` - 深灰黑色
- **次要背景**: `#FF23272A` - 中性深灰
- **主要文字**: `#FFF5F7FA` - 亮白色
- **强调色**: `#FF6CA0DC` - 柔和蓝色
- **辅助色**: `#FFB0BEC5` - 浅蓝灰色

#### 浅色主题 (Light Theme)
- **主背景**: `#FFFDFDFD` - 纯白色
- **次要背景**: `#FFF5F7FA` - 浅灰色
- **主要文字**: `#FF222222` - 深灰色
- **强调色**: `#FF4A90E2` - 鲜明蓝色
- **辅助色**: `#FFB0C4DE` - 浅蓝色

### 字体规范
- **标题字体**: HYRunYuan-65S (粗体，24px)
- **正文字体**: HYRunYuan-35S (常规，16px)
- **次要文字**: HYRunYuan-35S (常规，14px)
- **标签文字**: HYRunYuan-45S (中等，12px)

## 功能需求

### 1. 主界面布局

#### 1.1 顶部导航栏
**位置**: 窗口顶部，占用高度 60px
**功能组件**:
- **应用图标**: 左侧，32x32px
- **窗口标题**: "Sparkle Player" + 当前播放歌曲名
- **搜索框**: 居中位置，支持歌曲/艺术家/专辑搜索
- **用户头像/设置**: 右侧区域
- **主题切换按钮**: 设置旁边的切换按钮

#### 1.2 左侧导航面板
**位置**: 窗口左侧，宽度 240px，可折叠
**导航分类**:
```
📚 音乐库
  📎 推荐
  🎵 歌曲 (显示歌曲总数)
  💿 专辑
  🎤 歌手
  📂 专辑艺术家
  🎼 流派

👤 个人
  ❤️  我喜欢的
  📁 本地音乐
  📥 下载管理

📝 播放列表
  ➕ 创建的歌单(0)
  [动态显示用户创建的播放列表]
```

#### 1.3 主内容区域
**位置**: 窗口中央，自适应宽度
**功能模块**:

##### 1.3.1 推荐/首页界面
- **横幅轮播**: 精选推荐内容，高度 200px
- **精选推荐**: 网格布局的推荐内容卡片
- **推荐歌单**: 每日推荐、流行榜单等
- **推荐歌曲**: 基于用户偏好的歌曲推荐
- **快速访问**: 最近播放、常听歌手等

##### 1.3.2 歌曲列表界面
**列表显示字段**:
- 序号 | 歌曲名 | 艺术家 | 专辑 | 时长 | 操作
- 支持多选、批量操作
- 右键菜单：播放、添加到播放列表、下载、分享等

##### 1.3.3 专辑/艺术家详情页
- **封面图片**: 左侧 300x300px
- **基本信息**: 专辑名、艺术家、发行日期、曲目数
- **操作按钮**: 播放全部、随机播放、收藏
- **曲目列表**: 详细的歌曲列表

#### 1.4 底部播放控制栏
**位置**: 窗口底部，固定高度 80px
**布局结构**:

```
[歌曲信息区域 - 280px] [播放控制区域 - 自适应] [音量/功能区域 - 200px]
```

##### 1.4.1 歌曲信息区域 (左侧)
- **专辑封面**: 60x60px，圆角设计
- **歌曲标题**: 主要文字，可滚动显示
- **艺术家名称**: 次要文字，点击可跳转
- **收藏按钮**: 爱心图标，支持点击收藏

##### 1.4.2 播放控制区域 (中央)
**控制按钮** (从左到右):
- **随机播放**: shuffle 图标，点击切换状态
- **上一首**: previous 图标
- **播放/暂停**: 大号圆形按钮，48px
- **下一首**: next 图标
- **循环模式**: repeat 图标 (单曲/列表/随机)

**进度条区域**:
- **当前时间**: 00:00 格式
- **进度条**: 可拖拽，显示缓冲进度
- **总时长**: 00:00 格式

##### 1.4.3 音量/功能区域 (右侧)
- **音量图标**: 静音/低/中/高音量状态
- **音量滑块**: 水平滑块，0-100%
- **播放模式**: 顺序/随机/单曲循环
- **播放列表**: 显示当前播放队列
- **全屏/迷你模式**: 切换显示模式

### 2. 播放功能

#### 2.1 音频播放核心
- **支持格式**: MP3, FLAC, WAV, AAC, M4A, OGG
- **高质量解码**: 无损音频播放支持
- **均衡器**: 预设和自定义EQ设置
- **音效增强**: 低音增强、虚拟环绕声等

#### 2.2 播放模式
- **顺序播放**: 按列表顺序播放
- **随机播放**: 随机选择歌曲
- **单曲循环**: 重复当前歌曲
- **列表循环**: 播放完列表后重新开始

#### 2.3 播放队列管理
- **当前播放列表**: 显示正在播放的队列
- **添加到队列**: 从各个位置添加歌曲
- **队列编辑**: 拖拽排序、删除歌曲
- **历史记录**: 最近播放的歌曲列表

### 3. 音乐库管理

#### 3.1 本地音乐扫描
- **自动扫描**: 指定文件夹自动扫描音乐文件
- **元数据读取**: 自动读取歌曲信息、专辑封面
- **重复文件检测**: 避免重复导入
- **批量编辑**: 批量修改歌曲信息

#### 3.2 音乐分类管理
- **智能分类**: 按艺术家、专辑、流派自动分类
- **自定义标签**: 用户自定义歌曲标签
- **评分系统**: 5星评分系统
- **播放统计**: 播放次数、最后播放时间

#### 3.3 播放列表功能
- **创建播放列表**: 自定义名称和封面
- **智能播放列表**: 基于条件自动更新
- **导入/导出**: 支持M3U, PLS等格式
- **分享功能**: 生成分享链接

### 4. 用户界面交互

#### 4.1 响应式设计
- **最小窗口**: 640x360px
- **默认窗口**: 屏幕分辨率的80%
- **自适应布局**: 根据窗口大小调整元素
- **移动端适配**: 触摸友好的交互设计

#### 4.2 键盘快捷键
```
播放/暂停: Space
上一首: ←
下一首: →
音量增加: ↑
音量减少: ↓
静音: M
搜索: Ctrl+F
切换主题: Ctrl+T
迷你模式: Ctrl+M
全屏: F11
```

#### 4.3 鼠标交互
- **双击播放**: 双击歌曲开始播放
- **右键菜单**: 丰富的上下文菜单
- **拖拽操作**: 支持文件拖拽导入
- **滚轮控制**: 音量、进度条滚轮控制

### 5. 高级功能

#### 5.1 迷你模式
- **紧凑布局**: 仅显示核心播放控制
- **窗口大小**: 320x120px
- **始终置顶**: 可选择始终显示在最前
- **透明度控制**: 可调整窗口透明度

#### 5.2 可视化效果
- **频谱分析器**: 实时音频频谱显示
- **波形显示**: 音频波形可视化
- **专辑封面动效**: 旋转、缩放等动画效果
- **全屏可视化**: 全屏模式下的视觉效果

#### 5.3 系统集成
- **任务栏控制**: Windows任务栏播放控制
- **系统通知**: 歌曲切换通知
- **媒体键支持**: 键盘媒体键控制
- **开机自启动**: 可选的自动启动功能

## 技术实现要求

### 6.1 性能要求
- **启动时间**: 应用启动时间 < 3秒
- **内存占用**: 空闲状态 < 100MB
- **CPU使用**: 播放状态 < 5%
- **响应时间**: UI交互响应 < 100ms

### 6.2 兼容性要求
- **操作系统**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **.NET版本**: .NET 9.0
- **屏幕分辨率**: 最小 1024x768
- **音频设备**: 支持标准音频输出设备

### 6.3 安全性要求
- **文件访问**: 仅访问用户授权的音乐目录
- **数据隐私**: 本地存储用户数据，不上传个人信息
- **权限控制**: 最小权限原则
- **数据备份**: 支持播放列表和设置的备份恢复

### 6.4 可扩展性
- **插件系统**: 支持第三方插件扩展
- **主题系统**: 支持自定义主题
- **国际化**: 多语言支持框架
- **API接口**: 为其他应用提供控制接口

## 用户体验目标

### 7.1 易用性
- **直观界面**: 新用户5分钟内掌握基本操作
- **一致性**: 界面元素和交互保持一致
- **错误处理**: 友好的错误提示和恢复机制
- **帮助系统**: 内置帮助文档和快速入门

### 7.2 美观性
- **视觉层次**: 清晰的信息层次结构
- **色彩搭配**: 和谐的配色方案
- **图标设计**: 统一的图标风格
- **动画效果**: 适度的动画增强体验

### 7.3 功能性
- **核心功能**: 播放、暂停、切换歌曲等基础功能稳定可靠
- **扩展功能**: 播放列表、搜索、管理等功能完善
- **个性化**: 支持用户个性化设置和偏好
- **效率工具**: 快捷键、批量操作等效率功能

## 开发里程碑

### 第一阶段 - 核心播放功能 (MVP)
- [ ] 基础UI框架搭建
- [ ] 音频播放引擎集成
- [ ] 播放控制界面
- [ ] 本地文件播放
- [ ] 基础播放列表

### 第二阶段 - 音乐库管理
- [ ] 本地音乐扫描
- [ ] 元数据管理
- [ ] 专辑/艺术家视图
- [ ] 搜索功能
- [ ] 播放列表管理

### 第三阶段 - 高级功能
- [ ] 迷你模式
- [ ] 可视化效果
- [ ] 均衡器
- [ ] 系统集成
- [ ] 设置和偏好

### 第四阶段 - 优化和扩展
- [ ] 性能优化
- [ ] 多平台适配
- [ ] 插件系统
- [ ] 国际化支持
- [ ] 文档和测试

## 结语

Sparkle Player 致力于成为一个现代化、美观、功能丰富的音乐播放器。通过精心设计的用户界面和强大的功能集，为用户提供卓越的音乐播放体验。项目将采用敏捷开发方法，逐步实现各项功能，确保每个版本都能为用户带来价值。

---

**文档版本**: 1.0  
**创建日期**: 2025年6月25日  
**最后更新**: 2025年6月25日
